---
title:  "EC2 란"

categories:
  - aws
tags:
  - AWS
  - EC2

date: 2025-06-03
thumbnail: "/assets/img/thumbnail/aws_thumbnail.jpeg"
---

EC2 란
=====
-----

- 클라우드 공간에 크기가 유연하게 변경되는 가상 서버 기능 제공
- 가상서버이기에 디스크 용량, CPU, 메모리 등을 자유롭게 조정 가능


비용 지불 방법
-----

- **온디맨드**: 사용한 만큼만 지불, 예측 불가능한 트래픽에 적합
- **리저브드**: 저렴한 비용, 1~3년 임대, 인스턴스 크기 변경 불가능
- **스팟 인스턴스**: 입찰, 단기 작업에 적합

EBS 란
=====
-----

## EBS란

- 파일 및 오브젝트 보관할 수 있는 스토리지 볼륨
- 인스턴스 종료되어도 데이터 유지
- 가용 영역을 설정해줘야함

## 가용영역
서울 안에 A, B 가용영역이 존재, 이유는 재해복구 (셧다운)

ELB
=====
-----

## ELB란
(Elastic Load Balancer) 로드 밸런싱 서비스로, 여러 인스턴스에 트래픽을 분산시켜 가용성과 안정성 향상

## ELB 타입
### ALB(애플리케이션 로드 밸런서)
- Application OSI Layer 에서 작동. Http/HTTPS 트래픽을 처리하며, URL 기반 라우팅, 호스트 기반 라우팅, WebSocket 지원 등 다양한 기능 제공
- ALB 의 고급 설정을 통해 원하는 서버로 직접 라우팅할 수 있다.
- 개발자가 라우팅 커스터마이징 가능

### NLB(네트워크 로드 밸런서)
- Network OSI Layer 에서 작동. TCP/UDP 트래픽을 처리하며, 높은 성능과 낮은 지연 시간 제공

### CLB(클래식 로드 밸런서)
- 가장 오래된 로드 밸런서로, HTTP/HTTPS 및 TCP 트래픽을 처리. ALB와 NLB에 비해 기능이 제한적이며, 현재는 사용이 권장되지 않음

-----

## ELB 에서 흔히 일어날 수 있는 에러

### 504 에러
- ELB가 백엔드 인스턴스에 요청을 전달했지만, 응답을 받지 못한 경우 발생
- 백엔드 인스턴스가 과부하 상태이거나, 네트워크 문제로 인해 응답이 지연되는 경우가 많음
- 해결 방법:
  - 백엔드 인스턴스의 상태 확인
  - 인스턴스의 CPU, 메모리 사용량 모니터링
  - 네트워크 설정 및 보안 그룹 확인

### X-Forwarded-For 헤더
- Http 요청을 로드밸런서가 받을 때, **출처** 에 대한 정보를 담고있음
- 헤더 정보의 흐름
```text
퍼블릭 IP 주소 -> private IP 주소로 이동 
-> private IP 주소엔 출처에 대한 정보가 없다.
-> X-Forwarded-For 헤더에 출처 정보가 담겨있다
-> 기존 public IP address를 찾을 수 있다.
```


